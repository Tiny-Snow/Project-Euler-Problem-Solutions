# Project Euler	Problem 044

<p align="right"><i>Tiny Snow</i></p>



## Problem

### Pentagon numbers

Pentagonal numbers are generated by the formula, $P_n=n(3n−1)/2$. The first ten pentagonal numbers are:
$$
1, 5, 12, 22, 35, 51, 70, 92, 117, 145, ...
$$
It can be seen that $P4 + P7 = 22 + 70 = 92 = P8$. However, their difference, $70 − 22 = 48$, is not pentagonal.

Find the pair of pentagonal numbers, $P_j$ and $P_k$, for which their sum and difference are pentagonal and $D = |P_k − P_j|$ is minimised; what is the value of $D$?



## Solution

本题的*Pentagon numbers*和[Problem 042](../P042/P042_Note.md)的*triangle numbers*类似，其判断方法也是类似的（通过开方或解二次方程算出 $n$ ），这里就不再赘述。不过，本题我们需要遍历，因此最好先遍历出足够多的*Pentagon numbers*。由于我们不知道上限，只能够先试一试了。

我们先遍历出10000个*Pentagon numbers*，然后再开始 $k,j$ 的循环遍历。注意：这里有两个**遍历的终止时刻**：

- 一旦 $P_k - P_{k-1}>D$ ，那么就应该终至 $k$ 的遍历（也就是整个循环），因为此时不可能再找到 $j<k$ 满足找到更小的 $D$ 了。
- 一旦 $P_k - P_{j}>D$ ，那么就应该终至 $j$ 的遍历（$j$ 从$k-1$ 开始遍历）。

事实上，如果一旦出现$P_k - P_{k-1}>D$ 的情况，那么说明之后的 *Pentagon numbers* 都不可能再找到更小的 $D$，此时整个问题的遍历就结束了。只不过我们不知道 $D$ 是多少，也就不知道具体需要多少个 *Pentagon numbers* ，只能先确定好一个较大的范围尝试遍历。

实现如下：

```python
#================================================================================================================================Solution
def is_pentagon(num):
    n = int(((2 / 3) * num) ** 0.5) + 1
    if n * (3 *n - 1) == 2 * num:
        return True
    return False

pentagon_list = []
limit = 10000
for n in range(1, limit + 1):
    pentagon_list.append(n * (3 * n - 1) // 2)

min_diff = pentagon_list[limit - 1] - pentagon_list[0]

for k in range(2, limit):
    if pentagon_list[k] - pentagon_list[k - 1] > min_diff:      # 考虑相邻两个pentagon number之差已经超过min_diff的情况，终止k的遍历
        break
    for j in reversed(range(1, k)):
        if pentagon_list[k] - pentagon_list[j] > min_diff:      # 考虑遍历时p[k] - p[j]之差已经超过min_diff，跳出j的遍历
            break
        if is_pentagon(pentagon_list[k] - pentagon_list[j]) == True and is_pentagon(pentagon_list[k] + pentagon_list[j]) == True:
            min_diff = min(min_diff, pentagon_list[k] - pentagon_list[j])
print(min_diff)
#================================================================================================================================Answer
The Answer is 5482660
```

