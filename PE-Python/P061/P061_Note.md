# Project Euler	Problem 061

<p align="right"><i>Tiny Snow</i></p>



## Problem

### Cyclical figurate numbers

Triangle, square, pentagonal, hexagonal, heptagonal, and octagonal numbers are all figurate (polygonal) numbers and are generated by the following formulae:

<table>
    <tr>
        <th align = "center">Triangle</th>
        <td><I>P<sub>3,n</sub>=n(n+1)/2</I></td>
        <td>1, 3, 6, 10, 15, ...</td>
    </tr>
    <tr>
        <th align = "center">Square</th>
        <td><I>P<sub>4,n</sub>=n<sup>2</sup></I></td>
        <td>1, 4, 9, 16, 25, ...</td>
    </tr>
    <tr>
        <th align = "center">Pentagonal</th>
        <td><I>P<sub>5,n</sub>=n(3n−1)/2</I></td>
        <td>1, 5, 12, 22, 35, ...</td>
    </tr>
    <tr>
        <th align = "center">Hexagonal</th>
        <td><I>H<sub>6,n</sub>=n(2n−1)</I></td>
        <td>1, 6, 15, 28, 45, ...</td>
    </tr>
    <tr>
        <th align = "center">Heptagonal</th>
        <td><I>H<sub>7,n</sub>=n(5n−3)/2</I></td>
        <td>1, 7, 18, 34, 55, ...</td>
    </tr>
    <tr>
        <th align = "center">Octagonal</th>
        <td><I>H<sub>8,n</sub>=n(3n−2)</I></td>
        <td>1, 8, 21, 40, 65, ...</td>
    </tr>
</table>

The ordered set of three 4-digit numbers: $8128, 2882, 8281$, has three interesting properties.

1. The set is cyclic, in that the last two digits of each number is the first two digits of the next number (including the last number with the first).
2. Each polygonal type: triangle ($P_{3,127}=8128$), square ($P_{4,91}=8281$), and pentagonal ($P_{5,44}=2882$), is represented by a different number in the set.
3. This is the only set of 4-digit numbers with this property.

Find the sum of the only ordered set of six cyclic 4-digit numbers for which each polygonal type: triangle, square, pentagonal, hexagonal, heptagonal, and octagonal, is represented by a different number in the set.



## Solution

本题需要注意的关键点在于：循环集合中，各个位上的数究竟是哪一种 *polygonal number* 是不一定的，因此我们要对所有排列进行一次循环。但是，由于循环集合是一种圆排列，因此如果采取全排列，必然会重复计算结果六次，因此在第一次找到答案后就可以停止循环了。

以上就是我们需要注意的地方，以下是相应的实现：

```python
#=====================================================================Solution
triangle_list = []
n = 0
while n * (n + 1) // 2 < 10000:
    if n * (n + 1) // 2 >= 1000:
        triangle_list.append(n * (n + 1) // 2)
    n += 1

square_list = []
n = 0
while n ** 2 < 10000:
    if n ** 2 >= 1000:
        square_list.append(n ** 2)
    n += 1

pentagonal_list = []
n = 0
while n * (3 * n - 1) // 2 < 10000:
    if n * (3 * n - 1) // 2 >= 1000:
        pentagonal_list.append(n * (3 * n - 1) // 2)
    n += 1

hexagonal_list = []
n = 0
while n * (2 * n - 1) < 10000:
    if n * (2 * n - 1) >= 1000:
        hexagonal_list.append(n * (2 * n - 1))
    n += 1

heptagonal_list = []
n = 0
while n * (5 * n - 3) // 2 < 10000:
    if n * (5 * n - 3) // 2 >= 1000:
        heptagonal_list.append(n * (5 * n - 3) // 2)
    n += 1

octagonal_list = []
n = 0
while n * (3 * n - 2) < 10000:
    if n * (3 * n - 2) >= 1000:
        octagonal_list.append(n * (3 * n - 2))
    n += 1

def find_ans(l1, l2, l3, l4, l5, l6):
    for n6 in l6:
        for n1 in l1:
            if int(str(n1)[:2]) > int(str(n6)[2:]):
                break
            if int(str(n1)[:2]) < int(str(n6)[2:]):
                continue
            for n2 in l2:
                if int(str(n2)[:2]) > int(str(n1)[2:]):
                    break
                if int(str(n2)[:2]) < int(str(n1)[2:]):
                    continue
                for n3 in l3:
                    if int(str(n3)[:2]) > int(str(n2)[2:]):
                        break
                    if int(str(n3)[:2]) < int(str(n2)[2:]):
                        continue
                    for n4 in l4:
                        if int(str(n4)[:2]) > int(str(n3)[2:]):
                            break
                        if int(str(n4)[:2]) < int(str(n3)[2:]):
                            continue
                        for n5 in l5:
                            if int(str(n5)[:2]) > int(str(n4)[2:]):
                                break
                            if int(str(n5)[:2]) < int(str(n4)[2:]):
                                continue
                            if int(str(n6)[:2]) == int(str(n5)[2:]):
                                return sum([n1, n2, n3, n4, n5, n6])

import itertools
for l in itertools.permutations([triangle_list, square_list, pentagonal_list, hexagonal_list, heptagonal_list, octagonal_list], 6):
    ans = find_ans(l[0], l[1], l[2], l[3], l[4], l[5])
    if ans != None:
        print(ans)
        break
#=====================================================================Answer
The Answer is 28684
```

